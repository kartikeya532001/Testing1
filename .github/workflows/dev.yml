name: Build and Release Web + Android

on:
  push:
    branches: [main]

jobs:
  hosting:
    name: Deploy Web and Android
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Install Shorebird CLI manually
        run: |
          # Clone Shorebird CLI (stable branch)
          git clone -b stable https://github.com/shorebirdtech/shorebird.git $HOME/.shorebird
      
          # Add the Shorebird bin directory to the PATH
          echo "$HOME/.shorebird/bin" >> $GITHUB_PATH
          echo "export PATH=$HOME/.shorebird/bin:$PATH" >> $GITHUB_ENV

      - name: Check Shorebird Version
        run: |
          export PATH="$HOME/.shorebird/bin:$PATH"
          shorebird --version



      - name: Shorebird Login
        run: |
          export PATH="$HOME/.shorebird/bin:$PATH"
          shorebird login --auth-token ${{ secrets.SHOREBIRD_AUTH_TOKEN }}
