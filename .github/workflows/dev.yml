name: Build and Release Web + Android

on:
  push:
    branches: [main]

jobs:
  hosting:
    name: Deploy Web and Android
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Install Shorebird CLI
        run: |
          curl -Ls https://get.shorebird.dev | bash
      
          if [ -x "$HOME/.shorebird/bin/shorebird" ]; then
            echo "✅ Shorebird CLI installed successfully."
          else
            echo "❌ Shorebird CLI installation failed."
            exit 1
          fi
      
          echo "$HOME/.shorebird/bin" >> $GITHUB_PATH
          echo "export PATH=$HOME/.shorebird/bin:$PATH" >> $GITHUB_ENV
          export PATH="$HOME/.shorebird/bin:$PATH"
          shorebird --version



      - name: Shorebird Login
        run: |
            "$HOME/.shorebird/shorebird" login --auth-token ${{ secrets.SHOREBIRD_AUTH_TOKEN }}
